var touchpad_default=`<style>
    :host {
        display: block;
        width: 300px;
        height: 150px;
    }
</style>
<slot></slot>`;var touchstartListener=function(event){for(let touch of event.changedTouches){let{identifier,screenX,screenY,clientX,clientY,radiusX,radiusY}=touch,width=radiusX*2,height=radiusY*2;this.touchpad.dispatchEvent(new PointerEvent("pointerenter",{pointerId:identifier,pointerType:"touch",button:0,buttons:1,screenX,screenY,clientX,clientY,width,height})),this.touchpad.dispatchEvent(new PointerEvent("pointerdown",{pointerId:identifier,pointerType:"touch",button:0,buttons:1,screenX,screenY,clientX,clientY,width,height}))}event.preventDefault()},touchmoveListener=function(event){for(let touch of event.changedTouches){let{identifier,screenX,screenY,clientX,clientY,radiusX,radiusY}=touch;this.touchpad.dispatchEvent(new PointerEvent("pointermove",{pointerId:identifier,pointerType:"touch",button:0,buttons:1,screenX,screenY,clientX,clientY,width:radiusX*2,height:radiusY*2}))}event.preventDefault()},touchendListener=function(event){for(let touch of event.changedTouches){let{identifier,screenX,screenY,clientX,clientY,radiusX,radiusY}=touch,width=radiusX*2,height=radiusY*2;this.touchpad.dispatchEvent(new PointerEvent("pointerup",{pointerId:identifier,pointerType:"touch",button:0,buttons:0,screenX,screenY,clientX,clientY,width,height})),this.touchpad.dispatchEvent(new PointerEvent("pointerleave",{pointerId:identifier,pointerType:"touch",button:0,buttons:0,screenX,screenY,clientX,clientY,width,height}))}},touchcancelListener=function(event){for(let touch of event.targetTouches){let{identifier,screenX,screenY,clientX,clientY,radiusX,radiusY}=touch,width=radiusX*2,height=radiusY*2;this.touchpad.dispatchEvent(new PointerEvent("pointerup",{pointerId:identifier,pointerType:"touch",button:0,buttons:0,screenX,screenY,clientX,clientY,width,height})),this.touchpad.dispatchEvent(new PointerEvent("pointerleave",{pointerId:identifier,pointerType:"touch",button:0,buttons:0,screenX,screenY,clientX,clientY,width,height}))}},ponterDownListener=function(event){if(this.touchpadData.analogMap.size<this.touchpadData.analogMax)this.touchpadData.analogMap.set(event.pointerId,{pointerId:event.pointerId,deadzoneX:event.pageX,deadzoneY:event.pageY,controlX:event.pageX,controlY:event.pageY,analogX:0,analogY:0})},ponterMoveListener=function(event){let analogData=this.touchpadData.analogMap.get(event.pointerId);if(!analogData)return;let{deadzoneRadius,controlRadius}=this.touchpadData,a=analogData.deadzoneX-event.pageX,b=analogData.deadzoneY-event.pageY,distance=Math.sqrt(a*a+b*b);if(distance>this.touchpadData.deadzoneRadius){let ratio=(distance-this.touchpadData.deadzoneRadius)/distance;analogData.deadzoneX-=a*ratio,analogData.deadzoneY-=b*ratio}if(a=analogData.controlX-event.pageX,b=analogData.controlY-event.pageY,distance=Math.sqrt(a*a+b*b),distance>controlRadius){let ratio=(distance-controlRadius)/distance;analogData.controlX-=ratio*a,analogData.controlY-=ratio*b}analogData.analogX=(analogData.deadzoneX-analogData.controlX)/(controlRadius-deadzoneRadius),analogData.analogY=(analogData.deadzoneY-analogData.controlY)/(controlRadius-deadzoneRadius)},ponterUpListener=function(event){this.touchpadData.analogMap.delete(event.pointerId)},TouchpadMap=new WeakMap;class Touchpad extends HTMLElement{static observedAttributes=["analogmax"];constructor(){super();let touchpadData={touchpad:this,deadzoneRadius:8,controlRadius:64,analogMax:0,analogMap:new Map};TouchpadMap.set(this,touchpadData),this.addEventListener("touchstart",{touchpad:this,handleEvent:touchstartListener}),this.addEventListener("touchmove",{touchpad:this,handleEvent:touchmoveListener}),this.addEventListener("touchend",{touchpad:this,handleEvent:touchendListener}),this.addEventListener("touchcancel",{touchpad:this,handleEvent:touchcancelListener}),this.addEventListener("pointerdown",{touchpadData,handleEvent:ponterDownListener}),this.addEventListener("pointermove",{touchpadData,handleEvent:ponterMoveListener}),this.addEventListener("pointerup",{touchpadData,handleEvent:ponterUpListener})}get deadzoneRadius(){return TouchpadMap.get(this).deadzoneRadius}set deadzoneRadius(radius){TouchpadMap.get(this).deadzoneRadius=radius}get controlRadius(){return TouchpadMap.get(this).controlRadius}set controlRadius(radius){TouchpadMap.get(this).controlRadius=radius}getAnalogData(pointerId){return TouchpadMap.get(this).analogMap.get(pointerId)||null}attributeChangedCallback(name,oldValue,newValue){if(name==="analogmax"){let touchpadData=TouchpadMap.get(this),pointerIds=touchpadData.analogMap.keys();if(touchpadData.analogMax=Number(newValue),touchpadData.analogMax<1){touchpadData.analogMap.clear();return}let i=0;for(let id of pointerIds){if(i>touchpadData.analogMax)touchpadData.analogMap.delete(id);i++}}}connectedCallback(){let touchpadData=TouchpadMap.get(this),root=this.attachShadow({mode:"closed"});root.innerHTML=`${touchpad_default}`}}customElements.define("touchpad-component",Touchpad);export{Touchpad};
